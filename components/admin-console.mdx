---
title: "Admin Console"
description: "React-based web application for platform management"
---

The Admin Console is a React-based web application for managing the Sari Platform. It provides interfaces for user management, API collection administration, access control, and system configuration.

## Tech Stack

| Technology | Version | Purpose |
|------------|---------|---------|
| React | 18.3.1 | UI framework |
| TypeScript | 5.8.3 | Type safety |
| Vite | 5.4.19 | Build tool |
| Tailwind CSS | 3.4.17 | Styling |
| shadcn/ui | - | Component library |
| TanStack Query | 5.83.0 | Server state |
| React Router | 6.30.1 | Routing |
| Firebase | 12.5.0 | Authentication |

## Project Structure

```
api-vault-guard/
├── src/
│   ├── main.tsx                 # Entry point
│   ├── App.tsx                  # Root component
│   ├── index.css                # Global styles
│   ├── config/
│   │   └── firebase.ts          # Firebase initialization
│   ├── contexts/
│   │   └── AuthContext.tsx      # Auth state management
│   ├── lib/
│   │   ├── auth.ts              # Auth functions
│   │   ├── api-client.ts        # API client
│   │   └── utils.ts             # Utilities
│   ├── hooks/
│   │   └── use-toast.ts         # Toast notifications
│   ├── pages/
│   │   ├── Dashboard.tsx        # Status page
│   │   ├── admin/               # Admin pages
│   │   └── client/              # Client pages
│   └── components/
│       ├── auth/                # Auth components
│       ├── admin/               # Admin components
│       ├── layout/              # Layout components
│       ├── theme/               # Theme components
│       └── ui/                  # shadcn/ui components
├── public/
├── package.json
├── vite.config.ts
├── tailwind.config.ts
└── tsconfig.json
```

## Authentication Context

```typescript
interface AuthContextType {
  user: User | null;
  session: Session | null;
  profile: Profile | null;
  loading: boolean;
  isAdmin: boolean;
  isApprovedClient: boolean;
  refreshProfile: () => Promise<void>;
  refreshToken: () => Promise<void>;
}

interface Profile {
  id?: string;
  email: string;
  full_name: string;
  company_name?: string;
  role: 'admin' | 'client';
  registration_status: 'pending' | 'approved' | 'rejected';
  client_id?: string;
  client_secret?: string;
  created_at?: string;
  updated_at?: string;
}
```

## Route Structure

### Admin Routes

| Path | Component | Description |
|------|-----------|-------------|
| `/requests` | RegistrationRequestsPage | Pending user approvals |
| `/clients` | ClientsPage | Approved client management |
| `/collections` | AdminCollectionsPage | API collection CRUD |
| `/audit` | AuditPage | System activity logs |
| `/configuration` | ConfigurationPage | Rate limit settings |

### Client Routes

| Path | Component | Description |
|------|-----------|-------------|
| `/dashboard` | ClientDashboardPage | Account overview |
| `/collections` | ClientCollectionsPage | Accessible APIs |

## Access Control

| Condition | Description |
|-----------|-------------|
| `isAdmin` | `role === 'admin' && registration_status === 'approved'` |
| `isApprovedClient` | `role === 'client' && registration_status === 'approved'` |
| Pending | Redirected to Dashboard with pending message |
| Rejected | Redirected to Dashboard with rejection message |

## API Client

```typescript
class APIClient {
  private baseUrl: string;

  private async request<T>(
    endpoint: string,
    options: RequestInit = {}
  ): Promise<{ data: T | null; error: any }> {
    const token = await auth.currentUser?.getIdToken();

    const response = await fetch(`${this.baseUrl}${endpoint}`, {
      ...options,
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`,
        ...options.headers,
      },
    });

    if (!response.ok) {
      return { data: null, error: await response.json() };
    }

    return { data: await response.json(), error: null };
  }

  // API namespaces
  profiles = { ... };
  collections = { ... };
  access = { ... };
  audit = { ... };
  rateLimits = { ... };
}
```

## Admin Pages

### Registration Requests

Displays pending user registrations for admin approval.

**Features:**
- List pending registration requests
- Show user details (name, email, company, date)
- Approve: Generates credentials, sends email
- Reject: Sends rejection notification
- Badge shows pending count

### Client Management

Manages approved users and their access.

**Features:**
- List all approved users (admins and clients)
- View user details
- Manage collection access per user
- Delete users

### API Collections

CRUD interface for API collections.

**Features:**
- List all collections
- Create new collection with OpenAPI spec
- Edit collection metadata
- Delete collections
- View OpenAPI spec in modal

### Configuration

Rate limit configuration management.

**Features:**
- **Rate Limit Tiers:** Create/edit/delete tier configs
- **Client Overrides:** Create per-client rate limits

## Theming

```typescript
<ThemeProvider
  attribute="class"
  defaultTheme="system"
  enableSystem
  storageKey="sari-theme"
>
```

## Environment Variables

```bash
# API Backend URL
VITE_API_URL=https://api.sari-platform.com

# Firebase Configuration
VITE_FIREBASE_API_KEY=AIza...
VITE_FIREBASE_AUTH_DOMAIN=project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=project-id
VITE_FIREBASE_STORAGE_BUCKET=project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=123456789
VITE_FIREBASE_APP_ID=1:123456789:web:abc123
```

## Local Development

```bash
# Install dependencies
npm install

# Start development server
npm run dev

# Build for production
npm run build

# Preview production build
npm run preview
```
